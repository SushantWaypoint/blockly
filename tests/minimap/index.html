<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Blockly Demo: Mirrored Blockly</title>
    <script src="../../blockly_uncompressed.js"></script>
    <script src="../../generators/javascript.js"></script>
    <script src="../../generators/javascript/logic.js"></script>
    <script src="../../generators/javascript/loops.js"></script>
    <script src="../../generators/javascript/math.js"></script>
    <script src="../../generators/javascript/text.js"></script>
    <script src="../../generators/javascript/lists.js"></script>
    <script src="../../generators/javascript/colour.js"></script>
    <script src="../../generators/javascript/variables.js"></script>
    <script src="../../generators/javascript/procedures.js"></script>
    <script src="../../generators/python.js"></script>
    <script src="../../generators/python/logic.js"></script>
    <script src="../../generators/python/loops.js"></script>
    <script src="../../generators/python/math.js"></script>
    <script src="../../generators/python/text.js"></script>
    <script src="../../generators/python/lists.js"></script>
    <script src="../../generators/python/colour.js"></script>
    <script src="../../generators/python/variables.js"></script>
    <script src="../../generators/python/procedures.js"></script>
    <script src="../../generators/php.js"></script>
    <script src="../../generators/php/logic.js"></script>
    <script src="../../generators/php/loops.js"></script>
    <script src="../../generators/php/math.js"></script>
    <script src="../../generators/php/text.js"></script>
    <script src="../../generators/php/lists.js"></script>
    <script src="../../generators/php/colour.js"></script>
    <script src="../../generators/php/variables.js"></script>
    <script src="../../generators/php/procedures.js"></script>
    <script src="../../generators/lua.js"></script>
    <script src="../../generators/lua/logic.js"></script>
    <script src="../../generators/lua/loops.js"></script>
    <script src="../../generators/lua/math.js"></script>
    <script src="../../generators/lua/text.js"></script>
    <script src="../../generators/lua/lists.js"></script>
    <script src="../../generators/lua/colour.js"></script>
    <script src="../../generators/lua/variables.js"></script>
    <script src="../../generators/lua/procedures.js"></script>
    <script src="../../generators/dart.js"></script>
    <script src="../../generators/dart/logic.js"></script>
    <script src="../../generators/dart/loops.js"></script>
    <script src="../../generators/dart/math.js"></script>
    <script src="../../generators/dart/text.js"></script>
    <script src="../../generators/dart/lists.js"></script>
    <script src="../../generators/dart/colour.js"></script>
    <script src="../../generators/dart/variables.js"></script>
    <script src="../../generators/dart/procedures.js"></script>
    <script src="../../msg/messages.js"></script>
    <script src="../../blocks/logic.js"></script>
    <script src="../../blocks/loops.js"></script>
    <script src="../../blocks/math.js"></script>
    <script src="../../blocks/text.js"></script>
    <script src="../../blocks/lists.js"></script>
    <script src="../../blocks/colour.js"></script>
    <script src="../../blocks/variables.js"></script>
    <script src="../../blocks/procedures.js"></script>

  <style>
    body {
      background-color: #fff;
      font-family: sans-serif;
    }
    h1 {
      font-weight: normal;
      font-size: 140%;
    }
  </style>
</head>
<body>
  <h1><a href="https://developers.google.com/blockly/">Blockly</a> &gt;
    <!--<a href="../index.html">-->Demos<!--</a>--> &gt; Mirrored Blockly</h1>

  <p>This is a simple demo of a master Blockly that controls a slave Blockly.
  Open the JavaScript console to see the event passing.</p>

  <p>&rarr; More info on <a href="https://developers.google.com/blockly/guides/configure/web/events">events</a>&hellip;</p>

    
    
        
   
        


        <div id="container">

            <div id="slaveDiv" style="height: 1000px; width: 2000px; -webkit-transform: scale(.2); -moz-transform: scale(.2);
            transform: scale(.2); position:fixed;

            bottom:-130px;
            left:50px;
            z-index:99;
            border: 5px solid red;">

                <canvas id="map" style="height: 1000px;  position:fixed;


            z-index:99;
            border: 5px solid red;
            opacity:0"></canvas>

            </div>
            <div id="masterDiv" style="height: 1000px; width: 2000px;"></div>

            </div>


                <xml id="toolbox" style="display: none">
                    <block type="controls_if"></block>
                    <block type="logic_compare"></block>
                    <block type="controls_repeat_ext"></block>
                    <block type="math_number"></block>
                    <block type="math_arithmetic"></block>
                    <block type="text"></block>
                    <block type="text_print"></block>
                    <block type="variables_get"><field name="VAR">i</field></block>
                    <block type="variables_get"><field name="VAR">j</field></block>
                    <block type="variables_get"><field name="VAR">k</field></block>
                </xml>

                <script>
                    // Inject master workspace.
                    var masterWorkspace = Blockly.inject('masterDiv',
                        {
                            media: '../../media/',
                            toolbox: document.getElementById('toolbox')
                        });
                    // Inject slave workspace.
                    var slaveWorkspace = Blockly.inject('slaveDiv',
                        {
                            media: '../../media/',
                            readOnly: true
                        });
                    // Listen to events on master workspace.
                    masterWorkspace.addChangeListener(mirrorEvent);

                    function mirrorEvent(masterEvent) {
                        if (masterEvent.type == Blockly.Events.UI) {
                            return;  // Don't mirror UI events.
                        }
                        // Convert event to JSON.  This could then be transmitted across the net.
                        var json = masterEvent.toJson();
                        console.log(json);
                        // Convert JSON back into an event, then execute it.
                        var slaveEvent = Blockly.Events.fromJson(json, slaveWorkspace);
                        slaveEvent.run(true);
                    }
                </script>

                <script src="pagemap.min.js"></script>
                <script>
                    pagemap(document.querySelector('#map'), {
                        // viewport: document.querySelector('#container'),
                        interval: 50,
                        styles: {
                            div: 'rgba(0,0,0,0.1)'
                        },
                        back: 'rgba(255,255,255,1)'
                    });
                </script>


</body>
</html>
